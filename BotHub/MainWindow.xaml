<Window
    x:Class="BotHub.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converter="clr-namespace:BotHub.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="{Binding WindowTitle}"
    Width="900"
    Height="550"
    Background="#F5F7FA"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <Window.Resources>

        <!--  Button text converter  -->
        <converter:BoolToConnectDisconnectConverter x:Key="BoolToConnectDisconnectConverter" />

        <!--  Modern button  -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="#4A6CF7" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Padding" Value="10,6" />
            <Setter Property="Margin" Value="6" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3A57D6" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Combobox style  -->
        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="White" />
            <Setter Property="Padding" Value="8" />
            <Setter Property="Width" Value="250" />
            <Setter Property="Margin" Value="6" />
        </Style>

    </Window.Resources>

    <Grid>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  HEADER BAR  -->
        <Border
            Padding="20"
            Background="White"
            BorderBrush="#E3E7EC"
            BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!--  App Title  -->
                <TextBlock
                    VerticalAlignment="Center"
                    FontSize="28"
                    FontWeight="Bold"
                    Foreground="#333"
                    Text="SPL Bot Hub" />

                <!--  Connect / Disconnect button  -->
                <Button
                    Grid.Column="1"
                    Width="130"
                    Command="{Binding SBoxConnectionCommand}"
                    Content="{Binding IsSBoxConnected, Converter={StaticResource BoolToConnectDisconnectConverter}}" />
            </Grid>
        </Border>


        <!--  MAIN CONTENT  -->
        <StackPanel Grid.Row="1" Margin="30">

            <!--  Bot selection  -->
            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                <TextBlock
                    Margin="0,0,8,0"
                    VerticalAlignment="Center"
                    FontSize="16"
                    Foreground="#444"
                    Text="Available Bots:" />
                <ComboBox
                    DisplayMemberPath="Name"
                    ItemsSource="{Binding AvailableBots}"
                    SelectedItem="{Binding SelectedBot, Mode=TwoWay}" />
            </StackPanel>

            <!--  Buttons  -->
            <StackPanel Margin="0,20,0,0" Orientation="Horizontal">
                <Button
                    Width="130"
                    Command="{Binding ReloadBotsCommand}"
                    Content="Reload" />

                <Button
                    Width="130"
                    Command="{Binding BotConnectionCommand}"
                    Content="{Binding IsBotRunning, Converter={StaticResource BoolToConnectDisconnectConverter}}"
                    IsEnabled="{Binding SelectedBot}" />
            </StackPanel>

        </StackPanel>

    </Grid>

</Window>
